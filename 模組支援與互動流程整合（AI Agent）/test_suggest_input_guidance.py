import requests

url = "http://localhost:8000/agent/suggest_input_guidance/"

test_cases = [
    ("æˆ‘ä¸åƒè¾£", ["æ¸…çˆ½", "æ¹¯å“", "æ’é™¤"]),
    ("æˆ‘ä¸åƒç‰›", ["ç‰›", "æ’é™¤"]),
    ("æµ·é®®éæ•", ["æµ·é®®", "æ’é™¤"]),
    ("æˆ‘åƒç´ ", ["ç´ é£Ÿ", "è”¬é£Ÿ"]),
    ("æœ‹å‹èšé¤", ["æœ‹å‹", "èšæœƒ", "å¤šäºº"]),
    ("å®¶äººåƒé£¯", ["å®¶åº­", "å¤šäºº", "å¯¬æ•"]),
    ("ä»Šå¤©æ˜¯ç´„æœƒ", ["ç´„æœƒ", "æ°£æ°›", "å’–å•¡å»³"]),
    ("æœ‰é»å•†å‹™éœ€æ±‚", ["æ­£å¼", "ç©©é‡", "é«˜è©•åƒ¹"]),
    ("è¦å¹«æœ‹å‹æ…¶ç”Ÿ", ["æ…¶ç”Ÿ", "æ°£æ°›", "åŒ…å»‚"]),
    ("è¦å¸¶å°å­©ä¸€èµ·åƒ", ["å°å­©", "å…’ç«¥", "è¦ªå­"]),
    ("è¦è«‹é•·è¼©åƒé£¯", ["é•·è¼©", "å®¶åº­", "å®‰éœ"]),
    ("æƒ³æ‰¾ä¾¿å®œçš„é¤å»³", ["ä¾¿å®œ", "å¹³åƒ¹", "ä¸è²´"]),
    ("ä¾†é»é«˜ç´šçš„", ["é«˜ç´š", "é«˜ç«¯", "ç²¾ç·»"]),
    ("æƒ³åƒå®µå¤œ", ["å®µå¤œ", "æ·±å¤œ"]),
    ("æ—©åˆé¤æœ‰æ¨è–¦å—", ["æ—©åˆé¤"]),
    ("æœ‰æ¨è–¦çš„æ—©é¤å—", ["æ—©é¤"]),
    ("æƒ³åƒç”œé»", ["ç”œé»"]),
    ("æ‹‰éºµå¥½å—", ["æ‹‰éºµ", "æ—¥å¼"]),
    ("æœ€è¿‘å¾ˆæƒ³åƒéŸ“å¼", ["éŸ“å¼"]),
    ("ä¸­å¼é¤å»³æ¨è–¦", ["ä¸­å¼"]),
    ("ç¾©å¤§åˆ©éºµå¥½åƒå—", ["ç¾©å¤§åˆ©éºµ", "ç¾©å¼"]),
    ("æƒ³åƒæ¼¢å ¡", ["æ¼¢å ¡", "ç¾å¼"]),
    ("ä»Šå¤©åƒä¸å¤š", ["è¼•é£Ÿ", "æ—©åˆé¤"]),
    ("æˆ‘è¶•æ™‚é–“", ["å¿«é€Ÿ", "å¤–å¸¶"]),
    ("å¤©æ°£å†·æƒ³åƒç†±çš„", ["æ¹¯å“", "ç«é‹", "ç†±"]),
    ("ä»Šå¤©æƒ³åƒè¾£çš„", ["è¾£", "éº»è¾£", "å·èœ"]),
    ("æƒ³åƒæ¸…æ·¡çš„", ["æ¸…æ·¡", "æ¸…çˆ½", "æ¹¯å“"]),
    ("ä¸è¦ç«é‹", ["æ’é™¤"]),
    ("ä¸æƒ³åƒéŸ“å¼", ["æ’é™¤", "éŸ“å¼"]),
    ("éš¨ä¾¿", ["å»ºè­°", "è¼¸å…¥"]),
]

success_count = 0
fail_count = 0
failed_cases = []

print("\nğŸ¯ é–‹å§‹æ¸¬è©¦ SuggestInputGuidanceView...\n")

for idx, (text, expected_keywords) in enumerate(test_cases, 1):
    response = requests.post(url, json={"text": text})
    result = response.json().get("guidance", "")
    found = any(keyword in result for keyword in expected_keywords)

    print(f"ğŸ§ª æ¸¬è©¦ {idx:2}: {text}")
    print(f"ğŸ“¥ å›å‚³å…§å®¹: {result}")
    if found:
        print("âœ… åŒ¹é…çµæœï¼šâœ”ï¸ é€šé\n")
        success_count += 1
    else:
        print(f"âŒ åŒ¹é…çµæœï¼šâŒ å¤±æ•—ï¼ˆæ‡‰åŒ…å«ï¼š{', '.join(expected_keywords)}ï¼‰\n")
        fail_count += 1
        failed_cases.append((text, result, expected_keywords))

print("ğŸ“Š æ¸¬è©¦çµæœçµ±è¨ˆ")
print(f"âœ”ï¸ é€šéï¼š{success_count}")
print(f"âŒ å¤±æ•—ï¼š{fail_count}")

if failed_cases:
    print("\nğŸ“Œ å¤±æ•—æ¡ˆä¾‹å›é¡§ï¼š")
    for text, response, expected in failed_cases:
        print(f"- âŒ æ¸¬è©¦è¼¸å…¥ï¼š{text}")
        print(f"  å›å‚³å…§å®¹ï¼š{response}")
        print(f"  é æœŸé—œéµè©ï¼š{expected}\n")